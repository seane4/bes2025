<!DOCTYPE html><!--  This site was created in Webflow. https://webflow.com  --><!--  Last Published: Wed Mar 12 2025 23:52:15 GMT+0000 (Coordinated Universal Time)  -->
<html data-wf-page="65e62b0c1a4d82b1ab329001" data-wf-site="65e62b0c1a4d82b1ab328fa8">
<head>
  <meta charset="utf-8">
  <title>Checkout Page</title>
  <meta content="The Biznus Template is focused on helping small and medium-sized businesses move their retail shop online.  Get your retail delivery business started with Webflow today." name="description">
  <meta content="2025 Banff Energy Summit" property="og:title">
  <meta content="2025 Banff Energy Summit" property="og:description">
  <meta content="https://i.ibb.co/Sdpx9ff/Banff-SOCIALCOVER.png" property="og:image">
  <meta content="2025 Banff Energy Summit" property="twitter:title">
  <meta content="2025 Banff Energy Summit" property="twitter:description">
  <meta content="https://i.ibb.co/Sdpx9ff/Banff-SOCIALCOVER.png" property="twitter:image">
  <meta property="og:type" content="website">
  <meta content="summary_large_image" name="twitter:card">
  <meta content="width=device-width, initial-scale=1" name="viewport">
  <meta content="Webflow" name="generator">
  <link href="css/normalize.css" rel="stylesheet" type="text/css">
  <link href="css/webflow.css" rel="stylesheet" type="text/css">
  <link href="css/banff-energy-summit-2024.webflow.css" rel="stylesheet" type="text/css">
  <link href="css/checkout-styles.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Sen:regular,700,800","Changa:regular,500,600,700,800","Roboto:regular"]  }});</script>
  <script type="text/javascript">!function(o,c){var n=c.documentElement,t=" w-mod-";n.className+=t+"js",("ontouchstart"in o||o.DocumentTouch&&c instanceof DocumentTouch)&&(n.className+=t+"touch")}(window,document);</script>
  <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon">
  <link href="images/webclip.png" rel="apple-touch-icon">
  <script src="https://js.stripe.com/v3/"></script>
  <script src="js/env-config.js"></script>
  <script src="js/stripe-checkout.js" defer></script>
  <script src="js/stripe-payments.js" defer></script>
  <script src="js/stripe-test.js" defer></script>
  <!-- Simple Cart Total Calculator -->
  <script>
    // This single script will calculate and display the grand total
    // It runs before any other scripts can interfere
    document.addEventListener('DOMContentLoaded', function() {
      function calculateGrandTotal() {
        // Get cart from localStorage
        // Ensure cart is an array, even if localStorage stores a single object incorrectly
        let rawCartData = JSON.parse(localStorage.getItem('cart')) || [];
        let cart = Array.isArray(rawCartData) ? rawCartData : [rawCartData]; // Force into array if it's not

        // Filter out potentially invalid entries if cart wasn't an array initially
        cart = cart.filter(item => item && typeof item === 'object' && item.price !== undefined);

        console.log('Cart items found:', cart.length);
        console.log('Raw cart data used for calculation:', JSON.stringify(cart, null, 2));

        // Calculate total
        let total = 0;
        cart.forEach(item => {
          // Assuming item.price is stored in cents (e.g., 18000 for $180.00)
          const price = parseFloat(item.price) || 0; // Convert cents to dollars
          const quantity = parseInt(item.quantity, 10) || 1;
          const itemTotal = price * quantity;
          console.log(`Item: ${item.name || item.title || 'Unknown'}`);
          console.log(`  Raw price value: ${item.price} (type: ${typeof item.price})`);
          console.log(`  Parsed price (assuming cents): $${price.toFixed(2)}`);
          console.log(`  Quantity: ${quantity}`);
          console.log(`  Item total: $${itemTotal.toFixed(2)}`);
          total += itemTotal;
        });

        // Format total - Now correctly assuming 'total' is in dollars after conversion
        const formattedTotal = total.toFixed(2);
        console.log('Grand total calculated (after converting from cents):', formattedTotal);

        // Update display
        const grandTotalDisplay = document.getElementById('grand-total-display');
        if (grandTotalDisplay) {
          grandTotalDisplay.textContent = '$' + formattedTotal;
          grandTotalDisplay.style.color = '#4CAF50'; // Or keep original style
          grandTotalDisplay.style.fontWeight = 'bold'; // Or keep original style
          console.log('Grand total display updated successfully to: $' + formattedTotal);
        } else {
          console.error('Grand total display element not found');
        }

        // Adjusted warning message
        if (cart.length > 0 && total === 0) {
          console.error('WARNING: Cart has items but total is $0.00. Check that item.price exists and is a non-zero number in localStorage.');
          if(cart[0]) {
            console.log('First item price value:', cart[0].price);
          }
        }
      }

      // Calculate immediately
      calculateGrandTotal();

      // Update when cart is changed
      window.addEventListener('cartUpdated', calculateGrandTotal);

      // Expose the function globally so other scripts can call it directly
      window.calculateGrandTotal = calculateGrandTotal;

      // Add a check button for debugging
      const debugButton = document.createElement('button');
      debugButton.textContent = 'Debug Grand Total';
      debugButton.style.position = 'fixed';
      debugButton.style.bottom = '100px';
      debugButton.style.right = '20px';
      debugButton.style.padding = '10px';
      debugButton.style.background = '#4CAF50';
      debugButton.style.color = 'white';
      debugButton.style.border = 'none';
      debugButton.style.borderRadius = '4px';
      debugButton.style.zIndex = '9999';
      debugButton.addEventListener('click', function() {
        calculateGrandTotal();
        alert('Check console for detailed cart information and calculation steps');
      });
      document.body.appendChild(debugButton);
    });
  </script>
</head>
<body>
  <div class="menu-wrapper">
    <div class="w-dyn-list">
      <div role="list" class="w-dyn-items">
        <div role="listitem" class="w-dyn-item">
          <a href="#" class="banner w-inline-block">
            <div class="container bannerright">
              <div class="banner-content-wrapper">
                <div class="text-block-9"> LIMITED  SPOTS  AVAILABLE | INVITE  ONLY  | August 25 - 28 | <span class="green">(403) 606-9223</span></div>
              </div>
            </div>
          </a>
        </div>
      </div>
      <div class="alert-empty w-dyn-empty"></div>
    </div>
    <div data-collapse="medium" data-animation="over-right" data-duration="400" data-easing="ease" data-easing2="ease" role="banner" class="navbar w-nav">
      <div class="container">
        <div class="nav-wrapper">
          <a href="index.html" class="brand w-nav-brand"><img src="images/banff-mainlogo.png" alt="" width="110" sizes="110px" srcset="images/banff-mainlogo-p-500.png 500w, images/banff-mainlogo.png 585w" class="logo mobileimg"></a>
          <div class="cart-nav-wrapper">
            <nav role="navigation" class="nav-menu w-nav-menu">
              <a href="activity-info.html" class="nav-link w-nav-link">Activities</a>
              <a href="agenda.html" class="nav-link w-nav-link">Agenda</a>
              <a href="register-now.html" class="nav-link w-nav-link">Register</a>
              <a href="sponsor.html" class="nav-link w-nav-link">Sponsor</a>
              <a href="contact.html" class="nav-link w-nav-link">Contact</a>
              <div class="w-layout-vflex flex-block-12">
                <a href="sponsor.html" class="btn hide w-button">Sponsor today!</a>
                <a href="register-now.html" class="btn w-button">Register Now</a>
              </div>
            </nav>
            <div>
              <div data-node-type="commerce-cart-wrapper" data-open-product="" data-wf-cart-type="rightSidebar" data-wf-cart-query="" data-wf-page-link-href-prefix="" class="w-commerce-commercecartwrapper cart-menu">
                <a href="#" data-node-type="commerce-cart-open-link" class="w-commerce-commercecartopenlink cart w-inline-block" role="button" aria-haspopup="dialog" aria-label="Open cart"><img src="images/cart_1.svg" alt="" class="cart-icon">
                  <div class="w-commerce-commercecartopenlinkcount cart-quantity-cart">0</div>
                </a>
                <div data-node-type="commerce-cart-container-wrapper" style="display:none" class="w-commerce-commercecartcontainerwrapper w-commerce-commercecartcontainerwrapper--cartType-rightSidebar">
                  <div data-node-type="commerce-cart-container" role="dialog" class="w-commerce-commercecartcontainer">
                    <div class="w-commerce-commercecartheader">
                      <h4 class="w-commerce-commercecartheading">Your Cart</h4>
                      <a href="#" data-node-type="commerce-cart-close-link" class="w-commerce-commercecartcloselink w-inline-block" role="button" aria-label="Close cart"><svg width="16px" height="16px" viewbox="0 0 16 16">
                          <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                            <g fill-rule="nonzero" fill="#333333">
                              <polygon points="6.23223305 8 0.616116524 13.6161165 2.38388348 15.3838835 8 9.76776695 13.6161165 15.3838835 15.3838835 13.6161165 9.76776695 8 15.3838835 2.38388348 13.6161165 0.616116524 8 6.23223305 2.38388348 0.616116524 0.616116524 2.38388348 6.23223305 8"></polygon>
                            </g>
                          </g>
                        </svg></a>
                    </div>
                    <div class="w-commerce-commercecartformwrapper">
                      <form data-node-type="commerce-cart-form" style="display:none" class="w-commerce-commercecartform">
                        <script type="text/x-wf-template" id="wf-template-d0872620-da83-2e6a-1190-a6df4dad026e"></script>
                        <div class="w-commerce-commercecartlist" data-wf-collection="database.commerceOrder.userItems" data-wf-template-id="wf-template-d0872620-da83-2e6a-1190-a6df4dad026e">
                          <div class="w-commerce-commercecheckoutorderitem cart-items-list" id="checkout-items-list">
                            <!-- Cart items will be dynamically populated here, WITHOUT shirt size inputs and special instructions -->
                          </div>
                        </div>
                        <div class="w-commerce-commercecartfooter">
                          <div aria-live="" aria-atomic="false" class="w-commerce-commercecartlineitem">
                            <div class="text-block-15">Subtotal</div>
                            <div class="w-commerce-commercecartordervalue text-block-16"></div>
                          </div>
                          <div>
                            <div data-node-type="commerce-cart-quick-checkout-actions">
                              <a role="button" aria-haspopup="dialog" aria-label="Apple Pay" data-node-type="commerce-cart-apple-pay-button" style="background-image:-webkit-named-image(apple-pay-logo-white);background-size:100% 50%;background-position:50% 50%;background-repeat:no-repeat" class="w-commerce-commercecartapplepaybutton" tabindex="0">
                                <div></div>
                              </a>
                              <a role="button" tabindex="0" aria-haspopup="dialog" data-node-type="commerce-cart-quick-checkout-button" style="display:none" class="w-commerce-commercecartquickcheckoutbutton"><svg class="w-commerce-commercequickcheckoutgoogleicon" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16" viewbox="0 0 16 16">
                                  <defs>
                                    <polygon id="google-mark-a" points="0 .329 3.494 .329 3.494 7.649 0 7.649"></polygon>
                                    <polygon id="google-mark-c" points=".894 0 13.169 0 13.169 6.443 .894 6.443"></polygon>
                                  </defs>
                                  <g fill="none" fill-rule="evenodd">
                                    <path fill="#4285F4" d="M10.5967,12.0469 L10.5967,14.0649 L13.1167,14.0649 C14.6047,12.6759 15.4577,10.6209 15.4577,8.1779 C15.4577,7.6339 15.4137,7.0889 15.3257,6.5559 L7.8887,6.5559 L7.8887,9.6329 L12.1507,9.6329 C11.9767,10.6119 11.4147,11.4899 10.5967,12.0469"></path>
                                    <path fill="#34A853" d="M7.8887,16 C10.0137,16 11.8107,15.289 13.1147,14.067 C13.1147,14.066 13.1157,14.065 13.1167,14.064 L10.5967,12.047 C10.5877,12.053 10.5807,12.061 10.5727,12.067 C9.8607,12.556 8.9507,12.833 7.8887,12.833 C5.8577,12.833 4.1387,11.457 3.4937,9.605 L0.8747,9.605 L0.8747,11.648 C2.2197,14.319 4.9287,16 7.8887,16"></path>
                                    <g transform="translate(0 4)">
                                      <mask id="google-mark-b" fill="#fff">
                                        <use xlink:href="#google-mark-a"></use>
                                      </mask>
                                      <path fill="#FBBC04" d="M3.4639,5.5337 C3.1369,4.5477 3.1359,3.4727 3.4609,2.4757 L3.4639,2.4777 C3.4679,2.4657 3.4749,2.4547 3.4789,2.4427 L3.4939,0.3287 L0.8939,0.3287 C0.8799,0.3577 0.8599,0.3827 0.8459,0.4117 C-0.2821,2.6667 -0.2821,5.3337 0.8459,7.5887 L0.8459,7.5997 C0.8549,7.6167 0.8659,7.6317 0.8749,7.6487 L3.4939,5.6057 C3.4849,5.5807 3.4729,5.5587 3.4639,5.5337" mask="url(#google-mark-b)"></path>
                                    </g>
                                    <mask id="google-mark-d" fill="#fff">
                                      <use xlink:href="#google-mark-c"></use>
                                    </mask>
                                    <path fill="#EA4335" d="M0.894,4.3291 L3.478,6.4431 C4.113,4.5611 5.843,3.1671 7.889,3.1671 C9.018,3.1451 10.102,3.5781 10.912,4.3671 L13.169,2.0781 C11.733,0.7231 9.85,-0.0219 7.889,0.0001 C4.941,0.0001 2.245,1.6791 0.894,4.3291" mask="url(#google-mark-d)"></path>
                                  </g>
                                </svg><svg class="w-commerce-commercequickcheckoutmicrosofticon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewbox="0 0 16 16">
                                  <g fill="none" fill-rule="evenodd">
                                    <polygon fill="#F05022" points="7 7 1 7 1 1 7 1"></polygon>
                                    <polygon fill="#7DB902" points="15 7 9 7 9 1 15 1"></polygon>
                                    <polygon fill="#00A4EE" points="7 15 1 15 1 9 7 9"></polygon>
                                    <polygon fill="#FFB700" points="15 15 9 15 9 9 15 9"></polygon>
                                  </g>
                                </svg>
                                <div>Pay with browser.</div>
                              </a>
                            </div>
                            <a href="checkout.html" value="Continue to Checkout" data-node-type="cart-checkout-button" class="w-commerce-commercecartcheckoutbutton btn" data-loading-text="Hang Tight...">Continue to Checkout</a>
                          </div>
                        </div>
                      </form>
                      <div class="w-commerce-commercecartemptystate">
                        <div>No items found.</div>
                      </div>
                      <div aria-live="" style="display:none" data-node-type="commerce-cart-error" class="w-commerce-commercecarterrorstate alert-wrapper danger">
                        <div class="w-cart-error-msg" data-w-cart-quantity-error="Product is not available in this quantity." data-w-cart-general-error="Something went wrong when adding this item to the cart." data-w-cart-checkout-error="Checkout is disabled on this site." data-w-cart-cart_order_min-error="The order minimum was not met. Add more items to your cart to continue." data-w-cart-subscription_error-error="Before you purchase, please use your email invite to verify your address so we can send order updates.">Product is not available in this quantity.</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="nav-button w-nav-button">
              <div class="w-icon-nav-menu"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="content-section">
    <div class="w-layout-vflex flex-block-6">
      <h1 class="heading-2 sponsortitle sponsoredit"><strong>Checkout</strong></h1>
      <div class="support-top-details-text center checkout">CONTACT  ASHLEY@TRACTS.CO TO PAY BY ACH OR WIRE TRANSFER</div>
    </div>
    <div data-node-type="commerce-checkout-form-container" data-wf-checkout-query="" data-wf-page-link-href-prefix="" class="w-commerce-commercecheckoutformcontainer checkout-form">
      <div class="w-commerce-commercelayoutcontainer container-checkout w-container">
        <div class="w-commerce-commercelayoutmain">
          <div class="w-commerce-commercecheckoutorderitemswrapper">
            <div class="w-commerce-commercecheckoutblockheader block-header">
              <h4>Items in Order</h4>
            </div>
            <fieldset class="w-commerce-commercecheckoutblockcontent block-content">
              <div role="list" class="w-commerce-commercecheckoutorderitemslist" id="checkout-items-list">
                <!-- Cart items will be dynamically populated here -->
              </div>
            </fieldset>
          </div>

          <div class="w-commerce-commercecheckoutcustomerinfowrapper">
            <div class="w-commerce-commercecheckoutblockheader block-header">
              <h4>Customer Info</h4>
              <div class="text-block-18">* Required</div>
            </div>
            <fieldset class="w-commerce-commercecheckoutblockcontent block-content">
              <!-- Primary Guest Information -->
              <div class="customer-info-section">
                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Email *</label>
                    <input class="w-commerce-commercecheckoutemailinput input" type="email" name="email" required="">
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Full Name *</label>
                    <input class="w-commerce-commercecheckoutshippingfullname input" type="text" name="primary_name" required="">
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Phone Number *</label>
                    <input class="w-commerce-commercecheckoutshippingfullname input" type="tel" name="primary_phone" required="">
                  </div>
                </div>
                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Shirt Size *</label>
                    <select class="w-commerce-commercecheckoutshippingcountryselector input" name="primary_shirt_size" required="">
                      <option value="">Select Size</option>
                      <option value="XS">XS</option>
                      <option value="S">S</option>
                      <option value="M">M</option>
                      <option value="L">L</option>
                      <option value="XL">XL</option>
                      <option value="XXL">XXL</option>
                    </select>
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Height</label>
                    <input class="w-commerce-commercecheckoutshippingfullname input" type="text" name="primary_height" placeholder="e.g., 5 ft 11 in or 180 cm">
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Weight (lbs or kg)</label>
                    <input class="w-commerce-commercecheckoutshippingfullname input" type="number" name="primary_weight" min="0" placeholder="e.g., 175">
                  </div>
                </div>
              </div>

              <!-- Spouse Information -->
              <div class="customer-info-section">
                <div class="w-commerce-commercecheckoutsummaryblockheader block-header">
                  <h5>Spouse Information</h5>
                </div>
                <div class="w-commerce-commercecheckoutblockcontent block-content">
                  <div class="w-commerce-commercecheckoutrow">
                    <div class="w-commerce-commercecheckoutcolumn">
                      <label class="w-commerce-commercecheckoutlabel">Spouse Full Name</label>
                      <input class="w-commerce-commercecheckoutshippingfullname input" type="text" name="spouse_name">
                    </div>
                    <div class="w-commerce-commercecheckoutcolumn">
                      <label class="w-commerce-commercecheckoutlabel">Spouse Shirt Size</label>
                      <select class="w-commerce-commercecheckoutshippingcountryselector input" name="spouse_shirt_size">
                        <option value="">Select Size</option>
                        <option value="XS">XS</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                      </select>
                    </div>
                  </div>
                  <div class="w-commerce-commercecheckoutrow">
                    <div class="w-commerce-commercecheckoutcolumn">
                      <label class="w-commerce-commercecheckoutlabel">Spouse Height</label>
                      <input class="w-commerce-commercecheckoutshippingfullname input" type="text" name="spouse_height" placeholder="e.g., 5 ft 6 in or 168 cm">
                    </div>
                    <div class="w-commerce-commercecheckoutcolumn">
                      <label class="w-commerce-commercecheckoutlabel">Spouse Weight (lbs or kg)</label>
                      <input class="w-commerce-commercecheckoutshippingfullname input" type="number" name="spouse_weight" min="0" placeholder="e.g., 140">
                    </div>
                  </div>
                </div>
              </div>

              <!-- Additional Guest Information -->
              <div class="customer-info-section">
                <div class="w-commerce-commercecheckoutsummaryblockheader block-header">
                  <h5>Additional Guest Information (Optional)</h5>
                </div>
                <div class="w-commerce-commercecheckoutblockcontent block-content">
                  <div class="w-commerce-commercecheckoutrow">
                    <div class="w-commerce-commercecheckoutcolumn">
                      <label class="w-commerce-commercecheckoutlabel">Additional Guest Name</label>
                      <input class="w-commerce-commercecheckoutshippingfullname input" type="text" name="additional_guest_name">
                    </div>
                    <div class="w-commerce-commercecheckoutcolumn">
                      <label class="w-commerce-commercecheckoutlabel">Additional Guest Shirt Size</label>
                      <select class="w-commerce-commercecheckoutshippingcountryselector input" name="additional_guest_shirt_size">
                        <option value="">Select Size</option>
                        <option value="XS">XS</option>
                        <option value="S">S</option>
                        <option value="M">M</option>
                        <option value="L">L</option>
                        <option value="XL">XL</option>
                        <option value="XXL">XXL</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Special Requirements -->
              <div class="customer-info-section">
                <div class="w-commerce-commercecheckoutsummaryblockheader block-header">
                  <h5>Special Requirements</h5>
                </div>
                <div class="w-commerce-commercecheckoutblockcontent block-content">
                  <div class="additional-fields">
                    <label for="special_requirements" class="w-commerce-commercecheckoutlabel">Special dietary requirements, accommodations, or other notes:</label>
                    <textarea id="special_requirements" name="special_requirements" class="w-commerce-commercecheckoutshippingaddresscity input"></textarea>
                  </div>
                </div>
              </div>
            </fieldset>
          </div>

          <div class="w-commerce-commercecheckoutordersummarywrapper">
            <div class="w-commerce-commercecheckoutsummaryblockheader block-header">
              <h4 class="heading-2">Have a discount code?</h4>
            </div>
            <form data-node-type="commerce-checkout-discount-form" class="w-commerce-commercecheckoutdiscounts">
              <label for="wf-ecom-discounts" class="w-commerce-commercecheckoutdiscountslabel field-label-9">Discount Code</label>
              <input data-node-type="commerce-checkout-discount-input" class="w-commerce-commercecheckoutdiscountsinput w-input" maxlength="256" name="" data-name="field" placeholder="" type="text" id="wf-ecom-discounts">
              <button type="button" aria-label="Apply Discount" id="apply-discount-btn" class="w-commerce-commercecheckoutdiscountsbutton btn" onclick="handleDiscountCode()">Apply</button>
            </form>
            
          </div>

          <div class="w-commerce-commercecheckoutpaymentsummarywrapper">
            <div class="w-commerce-commercecheckoutblockheader">
              <h4>Payment Info</h4>
            </div>
            <fieldset class="w-commerce-commercecheckoutblockcontent">
              <form id="payment-form">
                <!-- Card Element Containers -->
                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Card Number *</label>
                    <div id="card-number-element" class="card-field"></div>
                  </div>
                </div>
                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Expiration Date *</label>
                    <div id="card-expiry-element" class="card-field"></div>
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">CVC *</label>
                    <div id="card-cvc-element" class="card-field"></div>
                  </div>
                </div>

                <!-- Billing Details -->
                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Billing Name *</label>
                    <input type="text" id="billing-name" class="w-commerce-commercecheckoutemailinput input" required>
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Email *</label>
                    <input type="email" id="billing-email" class="w-commerce-commercecheckoutemailinput input" required>
                  </div>
                </div>

                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Billing Address *</label>
                    <input type="text" id="billing-address" class="w-commerce-commercecheckoutemailinput input" required>
                  </div>
                </div>

                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">City *</label>
                    <input type="text" id="billing-city" class="w-commerce-commercecheckoutemailinput input" required>
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">State *</label>
                    <input type="text" id="billing-state" class="w-commerce-commercecheckoutemailinput input" required>
                  </div>
                </div>

                <div class="w-commerce-commercecheckoutrow">
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">ZIP Code *</label>
                    <input type="text" id="billing-zip" class="w-commerce-commercecheckoutemailinput input" required>
                  </div>
                  <div class="w-commerce-commercecheckoutcolumn">
                    <label class="w-commerce-commercecheckoutlabel">Country *</label>
                    <select id="billing-country" class="w-commerce-commercecheckoutshippingcountryselector input" required>
                      <option value="US">United States</option>
                      <option value="CA">Canada</option>
                    </select>
                  </div>
                </div>

                <!-- Error Display -->
                <div id="card-errors" class="w-commerce-commercecheckouterrorstate" style="display: none;"></div>

                <!-- Grand Total Display -->
                <div class="grand-total-wrapper">
                  <div class="grand-total-line">
                    <div class="grand-total-label">Grand Total:</div>
                    <div class="grand-total-amount" id="grand-total-display">Calculating...</div>
                  </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="w-commerce-commercecheckoutplaceorderbutton btn" style="width: 100%; padding: 15px 30px;">
                  Pay Now
                </button>
              </form>
            </fieldset>
          </div>
          
        </div>
        
      </div>
    </div>
  </div>
  <div class="footer">
    <div class="container">
      <div class="footer-wrapper">
        <div class="footer-logo-column">
          <a href="index.html" class="w-inline-block"><img src="images/Tracts-Horiz-Logo-Full-Color-White-Text.png" alt="" width="176" sizes="176px" srcset="images/Tracts-Horiz-Logo-Full-Color-White-Text-p-500.png 500w, images/Tracts-Horiz-Logo-Full-Color-White-Text-p-800.png 800w, images/Tracts-Horiz-Logo-Full-Color-White-Text.png 1406w"></a>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Load the main index.js file first to ensure cart consistency -->
  <script src="index.js" type="text/javascript"></script>
  <script>
    // Initialize checkout page when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
      console.log('DOM loaded, initializing checkout page...');
      
      // Initialize cart display first
      if (typeof updateCartDisplay === 'function') {
        console.log('Updating cart display...');
        updateCartDisplay();
      }
      
      // Initialize checkout page with a small delay to ensure cart is updated
      setTimeout(function() {
        if (typeof initCheckoutPage === 'function') {
          console.log('Initializing checkout page...');
          initCheckoutPage();
        } else {
          console.error('initCheckoutPage function not found');
        }
      }, 100);
      
      // Handle billing checkbox toggle
      const billingCheckbox = document.getElementById('billing-same-as-shipping');
      const billingAddressSection = document.querySelector('.w-commerce-commercecheckoutshippingaddresswrapper');
      
      if (billingCheckbox && billingAddressSection) {
        // Initialize based on checkbox state
        billingAddressSection.style.display = billingCheckbox.checked ? 'none' : 'block';
        
        // Add change event listener
        billingCheckbox.addEventListener('change', function() {
          billingAddressSection.style.display = this.checked ? 'none' : 'block';
        });
      }
      
      // Debug function to check cart contents
      window.debugCheckCart = function() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        console.log('DEBUG - Cart contents:', cart);
        console.log('DEBUG - Cart length:', cart.length);
        
        if (cart.length > 0) {
          alert('Cart has ' + cart.length + ' items. Check console for details.');
          
          // Force re-render the checkout page
          if (typeof initCheckoutPage === 'function') {
            initCheckoutPage();
          }
        } else {
          alert('Cart is empty! Add some items first.');
        }
      };
      
      // Add a small debug button
      const debugButton = document.createElement('button');
      debugButton.textContent = 'Debug Cart';
      debugButton.style.position = 'fixed';
      debugButton.style.bottom = '20px';
      debugButton.style.right = '20px';
      debugButton.style.zIndex = '9999';
      debugButton.style.padding = '10px';
      debugButton.style.background = '#f1f1f1';
      debugButton.style.border = '1px solid #ccc';
      debugButton.style.borderRadius = '4px';
      debugButton.style.cursor = 'pointer';
      debugButton.addEventListener('click', window.debugCheckCart);
      document.body.appendChild(debugButton);
    });
  </script>
  <script src="js/stripe-checkout.js" type="text/javascript"></script>
  <script src="https://js.stripe.com/v3/" id="stripe-js"></script>
  <script>
    // Wait for Stripe to load
    document.getElementById('stripe-js').addEventListener('load', function() {
      // Now load our custom scripts
      const scripts = [
        'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2',
        'js/stripe-payments.js',
        'js/stripe-test.js'
      ];
      
      scripts.forEach(src => {
        const script = document.createElement('script');
        script.src = src;
        script.type = 'text/javascript';
        document.body.appendChild(script);
      });
    });
  </script>
  <style>
    .card-field {
      padding: 12px;
      border: 1px solid #e0e0e0;
      border-radius: 4px;
      background-color: white;
      box-shadow: 0 1px 3px 0 #e6ebf1;
      -webkit-transition: box-shadow 150ms ease;
      transition: box-shadow 150ms ease;
      margin-bottom: 16px;
    }

    .card-field.StripeElement--focus {
      box-shadow: 0 1px 3px 0 #cfd7df;
    }

    .card-field.StripeElement--invalid {
      border-color: #dc3545;
    }

    .card-field.StripeElement--complete {
      border-color: #28a745;
    }

    .payment-error {
      color: #dc3545;
      font-size: 14px;
      margin-top: 8px;
    }

    #payment-form {
      margin-bottom: 20px;
    }

    .w-commerce-commercecheckoutcolumn {
      padding: 8px;
    }

    /* Force cart items to be visible */
    .w-commerce-commercecheckoutorderitem {
      display: block !important;
      margin-bottom: 20px;
      padding: 15px;
      border: 1px solid #e6e6e6;
      border-radius: 4px;
    }

    .checkout-item-content {
      display: flex;
      align-items: flex-start;
      gap: 20px;
    }

    .checkout-item-image-wrapper {
      width: 100px;
      height: 100px;
      flex-shrink: 0;
    }

    .checkout-item-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      border-radius: 4px;
    }

    .checkout-item-details {
      flex: 1;
    }

    .checkout-item-info h4 {
      margin-top: 0;
      margin-bottom: 10px;
      font-size: 16px;
      font-weight: 600;
    }

    .checkout-item-info p {
      margin: 5px 0;
      font-size: 14px;
      color: #666;
    }

    .checkout-remove-btn {
      padding: 8px 12px;
      background: #f44336;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .checkout-remove-btn:hover {
      background: #d32f2f;
    }

    /* Empty cart message styling */
    .empty-cart-message {
      text-align: center;
      padding: 30px;
    }

    .empty-cart-message p {
      margin-bottom: 20px;
      font-size: 16px;
      color: #666;
    }

    .empty-cart-message .btn {
      display: inline-block;
      padding: 10px 20px;
      background: #4CAF50;
      color: white;
      text-decoration: none;
      border-radius: 4px;
    }

    .empty-cart-message .btn:hover {
      background: #45a049;
    }
  </style>
  <div id="loading-overlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(255, 255, 255, 0.8); z-index: 10000; justify-content: center; align-items: center;">
    <!-- You can put a spinner image or text here -->
    <p style="font-size: 1.2em; color: #333;">Processing Payment...</p>
    <!-- Example using a simple CSS spinner (add CSS separately) -->
    <!-- <div class="spinner"></div> -->
  </div>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize Stripe
      const stripe = Stripe(window.STRIPE_PUBLISHABLE_KEY);

      const elements = stripe.elements();

      
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const checkoutItemsList = document.getElementById('checkout-items-list');

      function displayCheckoutItems() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];

        if (checkoutItemsList) {
          if (cart.length === 0) {
            checkoutItemsList.innerHTML = '<div class="empty-cart-message">No items in cart</div>';
            return;
          }

          checkoutItemsList.innerHTML = cart.map(item => {
            // Assume item.price is in dollars
            const price = parseFloat(item.price) || 0;
            const quantity = parseInt(item.quantity, 10) || 1;
            // Format price - ASSUMING dollars, NO division by 100
            const formattedPrice = price.toFixed(2); // Display price per item

            return `
            <div class="w-commerce-commercecheckoutorderitem">
              <div class="checkout-item-content">
                ${item.image ? `
                  <div class="checkout-item-image-wrapper">
                    <img src="${item.image}" alt="${item.name}" class="checkout-item-image">
                  </div>
                ` : ''}
                <div class="checkout-item-details">
                  <div class="checkout-item-info">
                    <h4>${item.name || item.title}</h4>
                    <p>Price: $${formattedPrice}</p> <!-- Display dollar price -->
                    <p>Quantity: ${item.quantity || 1}</p>
                  </div>
                </div>
              </div>
            </div>
          `}).join('');
        } else {
          console.warn("Element with ID 'checkout-items-list' not found.");
        }
      }

      displayCheckoutItems();

      // Listen for cart updates
      window.addEventListener('cartUpdated', displayCheckoutItems);
    });
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // NOTE: These IDs might not exist if you removed the default Webflow summary
      const orderSummaryList = document.getElementById('order-summary-list');
      const subtotalElement = document.getElementById('subtotal-amount');
      const totalElement = document.getElementById('total-amount');

      function updateOrderSummary() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        const filteredCart = cart.filter(item => item && typeof item === 'object' && item.price !== undefined);

        console.log('%cOrderSummary: Updating summary section...', 'color: orange;');

        if (orderSummaryList) {
          if (filteredCart.length === 0) {
            orderSummaryList.innerHTML = '<div class="empty-cart-message">No items in cart</div>';
            // Ensure totals are zeroed out if cart is empty
            if (subtotalElement) subtotalElement.textContent = '$0.00';
            if (totalElement) totalElement.textContent = '$0.00';
            console.log('%cOrderSummary: Cart empty, summary cleared.', 'color: orange;');
            return;
          }

          // Calculate subtotal - ASSUMING prices are already in dollars
          const subtotal = filteredCart.reduce((sum, item) => {
            const price = parseFloat(item.price) || 0;
            const quantity = parseInt(item.quantity) || 1;
            return sum + (price * quantity);
          }, 0);

          console.log(`%cOrderSummary: Calculated subtotal (assuming dollars): ${subtotal.toFixed(2)}`, 'color: orange;');

          // Display items
          orderSummaryList.innerHTML = filteredCart.map(item => {
             const price = parseFloat(item.price) || 0;
             const quantity = parseInt(item.quantity) || 1;
             const itemTotal = price * quantity;
             return `
                <div class="w-commerce-commercecheckoutsummarylineitem">
                  <div class="text-block-3">
                    ${item.name || item.title} Ã— ${quantity}
                  </div>
                  <div class="text-block-6">
                    $${itemTotal.toFixed(2)} <!-- Display item total assuming dollars -->
                  </div>
                </div>
             `;
          }).join('');

          // Update subtotal and total - ASSUMING dollars, NO division by 100
          if (subtotalElement) {
            subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
            console.log(`%cOrderSummary: Updated subtotal display to $${subtotal.toFixed(2)}`, 'color: orange;');
          }
          if (totalElement) {
            totalElement.textContent = `$${subtotal.toFixed(2)}`; // Assuming total is same as subtotal for now
            console.log(`%cOrderSummary: Updated total display to $${subtotal.toFixed(2)}`, 'color: orange;');
          }
        } else {
           console.log('%cOrderSummary: orderSummaryList element not found.', 'color: orange;');
        }
      }

      // Initial update
      updateOrderSummary();

      // Listen for cart updates
      window.addEventListener('cartUpdated', updateOrderSummary);
    });
  </script>
  <script src="js/stripe-test.js"></script>
  
  <!-- FINAL GRAND TOTAL UPDATER -->
  <script>
    // This is the final attempt to update the grand total
    (function() {
      console.log('%cFINAL UPDATER: Running final grand total update check', 'color: red; font-weight: bold;');

      // Get the cart data
      const rawCartData = JSON.parse(localStorage.getItem('cart')) || [];
      const cart = Array.isArray(rawCartData) ? rawCartData : [rawCartData];
      const filteredCart = cart.filter(item => item && typeof item === 'object' && item.price !== undefined);

      console.log('%cFINAL UPDATER: Calculating from ' + filteredCart.length + ' items', 'color: purple; font-weight: bold;');

      if (filteredCart.length === 0) {
        const grandTotalDisplay = document.getElementById('grand-total-display');
        if (grandTotalDisplay) {
          grandTotalDisplay.textContent = '$0.00';
          grandTotalDisplay.style.color = '#4CAF50';
          grandTotalDisplay.style.fontWeight = 'bold';
        }
        console.log('%cFINAL UPDATER: Cart is empty, setting total to $0.00', 'color: orange;');
        return;
      }

      // Calculate total - ASSUMING prices are already in dollars
      let totalInDollars = 0;
      filteredCart.forEach(item => {
        const price = parseFloat(item.price) || 0; // Assume price is dollars
        const quantity = parseInt(item.quantity, 10) || 1;
        totalInDollars += price * quantity;
        console.log(`%cFINAL UPDATER - Item: ${item.name || item.title || 'Unknown'}, Price: ${item.price}, Calculated Item Total: $${(price * quantity).toFixed(2)}`, 'color: blue');
      });

      // Format the total (already in dollars)
      let formattedTotal = totalInDollars.toFixed(2);

      console.log('%cFINAL UPDATER: Final calculated total (assuming dollars): $' + formattedTotal, 'color: green; font-weight: bold;');

      // Update the display
      const grandTotalDisplay = document.getElementById('grand-total-display');
      if (grandTotalDisplay) {
        grandTotalDisplay.textContent = '$' + formattedTotal;
        grandTotalDisplay.style.color = '#4CAF50';
        grandTotalDisplay.style.fontWeight = 'bold';
        console.log('%cFINAL UPDATER: Successfully updated display.', 'color: green;');
      } else {
         console.error('%cFINAL UPDATER: Grand total display element not found!', 'color: red;');
      }
    })();
  </script>
  <script src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=65e62b0c1a4d82b1ab328fa8" type="text/javascript" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <script src="js/webflow.js" type="text/javascript"></script>
  <script src="js/env-config.js" type="text/javascript"></script>
  <!-- Load Stripe library (if loading from CDN/locally) -->
  <script src="https://js.stripe.com/v3/"></script>

  <!-- THEN load the script that USES the config and Stripe -->
  <script src="js/stripe-payments.js"></script>
  
  <!-- PRICE FORMAT DIAGNOSTIC -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Create diagnostic button
      const diagButton = document.createElement('button');
      diagButton.textContent = 'Check Price Format';
      diagButton.style.position = 'fixed';
      diagButton.style.bottom = '180px';
      diagButton.style.right = '20px';
      diagButton.style.padding = '10px';
      diagButton.style.background = '#2196F3';
      diagButton.style.color = 'white';
      diagButton.style.border = 'none';
      diagButton.style.borderRadius = '4px';
      diagButton.style.zIndex = '9999';
      
      diagButton.addEventListener('click', function() {
        const cart = JSON.parse(localStorage.getItem('cart')) || [];
        
        if (cart.length === 0) {
          alert('Cart is empty. Please add items first.');
          return;
        }
        
        // Check the first item's price format
        const firstItem = cart[0];
        const price = parseFloat(firstItem.price) || 0;
        
        let message = `First item: ${firstItem.name || firstItem.title || 'Unknown'}\n`;
        message += `Raw price value: ${firstItem.price} (${typeof firstItem.price})\n`;
        message += `Parsed price: ${price}\n\n`;
        
        // Determine likely format
        const inCents = price / 100;
        const inDollars = price;
        
        message += `If price is in cents: $${inCents.toFixed(2)}\n`;
        message += `If price is in dollars: $${inDollars.toFixed(2)}\n\n`;
        
        // Make educated guess
        if (price > 0 && price < 10) {
          message += 'Price format appears to be in DOLLARS (no conversion needed)';
        } else if (price >= 100) {
          message += 'Price format appears to be in CENTS (needs to be divided by 100)';
        } else {
          message += 'Price format is unclear. Please check manually.';
        }
        
        alert(message);
      });
      
      document.body.appendChild(diagButton);
    });
  </script>
</body>
</html>